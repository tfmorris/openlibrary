$def with(q, results)
<h2>Find a Book</h2> 
<form id="search" name="search" method="get" action="/search"> 
    <p> 
        <input name="q" type="text" id="textfield" class="searchBox" value="$q"/> 
        <input type="submit" name="button" id="button" value="Search" /> 
   </p> 
</form> 

<h2 class="darkgreen">$results.num_found hits</h2> 
<table width="100%" border="0" cellpadding="5" cellspacing="0"> 
$for doc in results["docs"]:
    <tr> 
         <td>
           $ cover = "http://covers.openlibrary.org/b/olid/%s-M.jpg" % doc.cover_edition_key if doc.cover_edition_key else "http://openlibrary.org/images/icons/avatar_book-sm.png"

               <img src="$cover" width="45" height="68" hspace="10" align="left" />
         </td> 
         <td width="100%">
               <a href="$doc.url" class="bookTitle">$doc.title</a> by 
               $for author in doc["authors"]:
                   <a href="$author.url">$author.name</a>$cond(not loop.last, ",")
               <br /> 
               $# <span class="brown">$doc.first_publish_year, Rogers &amp; Hammerstein</span></td> 
        <td><input type="submit" name="button2" id="button2" value="Read" /></td> 
    </tr> 
</table> 
<p>&nbsp;</p> 
