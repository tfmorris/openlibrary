$def with (review, preview=False)

$var title: $_.EDIT $review.d.book.title review.

$:macros.databarEdit(review)

$:macros.AlertChanges(review)

$if preview:
    <p>$:format(review.text)</p>

$:macros.ChangeTemplate(review)

<div id="header">
<div style="float:left;padding-left:10px;padding-right:15px;"></div>
                <span class="pretitle">Currently editing <a href="/$review.author.name">$review.author.displayname</a>'s review for:<br /></span>
       <div id="title"> $review.book.title</div>
</div>


<div id="form-border">
<div id="metadata-body">

<form name="edit" method="post" action="">
<input type="hidden" name="book" value="$review.book" />
<input type="hidden" name="author" value="$review.author" />
<input type="hidden" name="source" value="$review.source" />
<input type="hidden" name="url" value="$review.url" />

<strong>$_.PAGETYPE</strong> <input type="text" name="_type" value="$review.type.name" />
<input type="button" onclick="changeTemplate()" value="$_.CHANGE"/><br /><br />


<p><strong>Review title</strong>:<br />
<input type="text" name="title" style="width: 100%" value="$review.title"/><br /><br />

<textarea name="text" rows="15" cols="80">$review.d.get('text', '')</textarea>

$:macros.EditButtons()

</form>

$:macros.HelpFormatting()

</div>
</div>

