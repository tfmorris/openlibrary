$def with (page)
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="" />
    <meta name="title" content="" />

    <meta name="author" content="OpenLibrary.org" />
    <meta name="creator" content="OpenLibrary.org" />
    <meta name="copyright" content="Original content copyright; 2009" />
    <meta name="distribution" content="Global" />
    <meta name="robots" content="Index, Follow" />

    <!--
    <link rel="alternate" type="application/json" href="http://openlibrary.org/.json"/>
    <link rel="alternate" type="application/rdf+xml" href="http://openlibrary.org/.rdf"/>
    -->

    $for js in ctx.javascripts:
        <script src="$js" type="text/javascript"/>

    $if query_param("debug", "false").lower() == "true":
        <script src="http://home.us.archive.org/~larthur/scripts/vendor.js" type="text/javascript"></script>
    $else:
        <script src="$vendor_js()" type="text/javascript"></script>
    
    <script src="/js/ol.js?format=raw" type="text/javascript"></script>
    
    <title>$:page.title ($_("Open Library"))</title>

    $for link in ctx.get("links", []):
        $:link

    $for s in ctx.stylesheets:
        <link rel="stylesheet" type="text/css" href="$s" />

    <link href="/css/master.css?format=raw" rel="stylesheet" type="text/css" />
    
    <script type="text/javascript">
        \$().ready(setupSearch);
    </script>
</head>

<body id="$ctx.get('bodyid', 'user')" tabindex="0">

    <div id="placement">
    <div id="position">

    <div class="siteSearch" id="headerSearch" tabindex="1000">
         <form method="get" action="/search" class="siteSearch">
            <input type="submit" value="$_('Search')"/>
            <input type="text" name="q" class="query" value="" title="type_search."/>

            <div class="searchPlacement">
                <div class="searchFilter">
                    <div class="searchOpener">
                        <a href="javascript:;" id="searchHead" text2="$_('Hide options')">$_("More search options")</a>
                    </div>
                    <div class="searchCheckbox">
                        <input type="checkbox" value="mhsncqbxgkup" id="ftokenstop" name="ftokens"/> 
                        <label for="ftokenstop">$_("Only show eBooks")</label>
                    </div>
                </div>
            </div>

            <div id="topOptions" class="searchOptions hidden">
                <div class="formElement">
                <label for="title1">$_("Title:")</label><br/>
                <input id="title1" type="text" name="wtitle" value="" size="35"/>

                </div>
                <div class="formElement">
                <label for="author1">$_("Author:")</label><br/>
                <input id="author1" type="text" name="wauthor" value="" size="35"/>
                </div>
                <div class="formElement">
                <label for="subject1">$_("Subject:")</label><br/>
                <input id="subject1" type="text" name="wtopic" value="" size="35"/>
                </div>
                <div class="formElement">
                <label for="isbn1">ISBN:</label><br/>
                <input id="isbn1" type="text" name="wisbn" value="" size="35" maxlength="15" />
                </div>
                <div class="formElement">
                <label for="publisher1">$_("Publisher:")</label><br/>
                <input id="publisher1" type="text" name="wpublisher" value="" size="35"/>
                </div>
                <div class="formElement">
                <label for="date1">$_("Date Range:")</label>
                <select id="date1" size="1" name="ftokens">
          <option value="">$_("Select from below")</option>
          <option value="tepxelncbajj">2000-now</option>

          <option value="qyffflovnvfj">1980-1999</option>
          <option value="nhkjevftnnlv">1960-1979</option>
          <option value="qtkcmjdbwajt">1940-1959</option>
          <option value="tsvxedbxltrb">1920-1939</option>
          <option value="unmegbwqwbia">before 1920</option>
           </select>

                </div>
            </form>

            </div>
            
        </div>
<!-- /TOP SEARCH -->

        <div id="header">

            <div id="headerNav">
                <ul class="links first">
                    <li><a href="/subjects">$_("Subjects")</a></li>
                </ul>

                <ul class="links second">
                    <li><a href="/authors">$_("Authors")</a></li>
                    <li><a href="/books/add">$_("Add a Book")</a></li>
                </ul>
                <ul class="links third">
                    <li><a href="/lists">$_("Lists")</a></li>
                    <li><a href="/recentchanges">$_("Recently")</a></li>

                    <li><a href="/about">$_("About Us")</a></li>
                </ul>
            </div>

            <div id="headerLogo">
              <p class="tagline"><a href="/" title="Go Home">$_("A page on the web for every book.")</a></p>
              <h2><a href="/" title="Go Home"><img src="/images/logo_OL-lg.png" alt="Open Library" width="220" height="140"/></a></h2>
            </div>

            <div id="headerTools">

                <div id="headerLogin">
                $if ctx.user:
                    <div style="display: none;">
                        <form name='logout' action="$homepath()/account/logout" method='POST'></form>
                    </div>
                    $:_("Welcome %(user)s", user='<a href="%s">%s</a>' % (ctx.user.key, ctx.user.displayname))
                    | <a href="$homepath()/account">$_("Preferences")</a>
                    | <a href="#" onclick="document.forms['logout'].submit()">$_("Log out")</a>
                $else:
                    <a href="/account/login" class="white">$_("Log in")</a>
                    /
                    <a href="/account/create">$_("Sign Up")</a>
                </div>
            </div>

        </div>

        <div id="content">
            <div class="flash-messages">
            $for flash in get_flash_messages():
                <div class="$flash.type"><span>$flash.message</span></div>
            </div>

            $:page

        </div>
    
        <div id="footer">
                    
        <div id="footerPosition">

<!-- BOTTOM SEARCH -->
            <div class="siteSearch" id="footerSearch" tabindex="1001">

            <form method="get" action="/search" class="siteSearch">

                <div id="bottomOptions" class="searchOptions hidden">
                    <div class="formElement">
                    <label for="title2">Title:</label><br/>
                    <input id="title2" type="text" name="wtitle" value="" size="35"/>

                    </div>
                    <div class="formElement">
                    <label for="author2">Author:</label><br/>
                    <input id="author2" type="text" name="wauthor" value="" size="35"/>
                    </div>
                    <div class="formElement">
                    <label for="subject2">Subject:</label><br/>
                    <input id="subject2" type="text" name="wtopic" value="" size="35"/>
                    </div>
                    <div class="formElement">
                    <label for="isbn2">ISBN:</label><br/>
                    <input id="isbn2" type="text" name="wisbn" value="" size="35" maxlength="15" />
                    </div>
                    <div class="formElement">
                    <label for="publisher2">Publisher:</label><br/>
                    <input id="publisher2" type="text" name="wpublisher" value="" size="35"/>
                    </div>
                    <div class="formElement">
                    <label for="date2">Date Range:</label>
                    <select id="date2" size="1" name="ftokens">
              <option value="">Select from below</option>
              <option value="tepxelncbajj">2000-now</option>

              <option value="qyffflovnvfj">1980-1999</option>
              <option value="nhkjevftnnlv">1960-1979</option>
              <option value="qtkcmjdbwajt">1940-1959</option>
              <option value="tsvxedbxltrb">1920-1939</option>
              <option value="unmegbwqwbia">before 1920</option>
               </select>

                    </div>
                </div>
            
                <input type="submit" value="Search"/>
                <input type="text" name="q" class="query" value="" title="type_search."/>

            <div class="searchPlacement">
                <div class="searchFilter">
                    <div class="searchOpener">
                        <a href="javascript:;" id="searchFoot" text2="$_('Hide options')">$_("More search options")</a>
                    </div>
                    <div class="searchCheckbox">
                        <input type="checkbox" value="mhsncqbxgkup" id="ftokenstop" name="ftokens"/> 
                        <label for="ftokenstop">$_("Only show eBooks")</label>
                    </div>
                </div>
            </div>

            </form>

            </div>
<!-- /BOTTOM SEARCH -->

            <div class="footerNav">
                <ul>
                    <li><a href="#top" title="Go to the top of this page">Top</a></li>
                    <li>|</li>
                    <li><a href="/" title="Go home">Home</a></li>
                    <li><strong>&middot;</strong></li>
                    <li><a href="/books/add" title="Add a new book to Open Library">$_("Add a Book")</a></li>
                    <li><strong>&middot;</strong></li>
                    <li><a href="/subjects" title="Explore subjects">$_("Subjects")</a></li>
                    <li>|</li>
                    <li><li><a href="/authors" title="Explore authors">$_("Authors")</a></li>
                    <li>|</li>
                    <li><a href="/lists" title="Manage your lists">$_("Lists")</a></li>
                    <li><strong>&middot;</strong></li>
                    <li><a href="/about" title="About the Open Library staff">$_("About Us")</a></li>
                    <li>|</li>
                    <li><a href="/help" title="Get help">$_("Help")</a></li>
                    <li><strong>&middot;</strong></li>
                    <li><a href="/developers" title="Visit the Developers Center">$_("Developers")</a></li>
                </ul>
            </div>

        </div>

            <div id="footerHistory">
                <h4>Around<br/>The Library</h4>
                $:macros.MostRecent()
                <div id="abuse">
                    <a href="[ABUSE]"><span></span>$_("Report spam")</a>
                </div>
            </div>


        </div>
            

    </div>
    </div>
    
    <div id="bottom">
        <div id="legal">
        <p>Open Library is an initiative of the <a href="http://www.archive.org/">Internet Archive</a>, a 501(c)(3) non-profit, building a digital library of Internet sites and other cultural artifacts in digital form.<br/>

        Other projects include the <a href="http://web.archive.org/collections/web.html">Wayback Machine</a>, <a href="http://www.archive.org/">archive.org</a>, <a href="http://www.nasaimages.org/">nasaimages.org</a>, <a href="http://www.archive-it.org">archive-it.org</a>.</p>
        <p>Your use of the Open Library is subject to the Internet Archive's <a href="http://www.archive.org/about/terms.php">Terms of Use</a>.</p>


        <!--[if lt IE 7]>
        <p style="background:#ffc;border:1px solid red;margin-top:20px;font:11px Verdana;padding:10px;">The Open Library website has not been optimized for Internet Explorer 6, so some features and graphic elements may not appear correctly. Please consider upgrading to <a href="http://www.microsoft.com/windows/internet-explorer/ie7/default.aspx">Internet Explorer 7</a>, <a href="http://www.microsoft.com/windows/internet-explorer/default.aspx">Internet Explorer 8</a> (the most recent version) or <a href="http://www.mozilla.com/firefox/">Firefox 3</a> to use this and other web sites to your fullest advantage.</p>
        <![endif]-->
        </div>
    </div>


</body>
</html>