$def with (a, b, name)

$if a.is_primitive:
    $ diffresults = diff(a.value, b.value)
$else:
    $ diffresults = diff(a.key, b.key)

<tr><td class="diff-header-side" valign="top">$name</td><td class="diff-body" valign="top">
$for r in diffresults:
    $if r.tag == "equal": $r.left \
    $if r.tag == "delete": <del>$r.left</del> \
    $if r.tag == "insert": $r.left \
    $if r.tag == "replace": <del>$r.left</del> \
    
</td><td class="diff-body" valign="top">
$for r in diffresults:
    $if r.tag == "equal": $r.right \
    $if r.tag == "delete": $r.right \
    $if r.tag == "insert": <ins>$r.right</ins> \
    $if r.tag == "replace": <ins>$r.right</ins> \
    
</td></tr>