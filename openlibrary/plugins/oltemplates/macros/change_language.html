$ languages = i18n.get_languages()

$ locale = i18n.get_locale()
$ _ = i18n.get_namespace('/macros/ChangeLanguage')

<br clear="all" />
<span class="green">
<b>$_.change_language:</b>
$:Dropdown('lang', languages, onchange="changelang();", id="lang_dropdown", value=locale).render()
<span class="helplabel" style="padding-left: 6px;">[<a href="/i18n">?</a>]</span></span>


<script>
       function changelang() {
           setlang(document.getElementById("lang_dropdown").value);
       }

       function setlang(lang) {
           document.cookie = "HTTP_LANG=" + lang + "; path=/;";
           window.location.reload()
       }
</script>