$def with (book)

<span class="bookcover">
    $ url = book.get_cover_url("S") or "/images/icons/avatar_book-sm.png"
    <a href="$book.key"><img src="$url" height="60"/></a>
</span>
<span class="resultTitle">
    <span class="details">
        <span class="booktitle">
            <a href="$book.url()">$book.title</a>
            <span class="brown smaller sansserif">
                $book.physical_format.replace('[', '').replace(']','')
            </span>
        </span>
        <br/>
        <span class="resultPublisher">

        $if book.publishers and book.publish_date:
            $book.publish_date, $(', '.join(book.publishers))
        $elif book.publish_date:
            $book.publish_date
        $elif book.publishers:
            $(', '.join(book.publishers))
        $else:
            <em>Publisher unknown</em>
        </span>
    </span>
</span>

$if book.ocaid: 
    <span class="actions">
        <a href="//archive.org/stream/$book.ocaid">
            <span class="image read"></span>
            <span class="label">Read</span>
        </a>
    </span>